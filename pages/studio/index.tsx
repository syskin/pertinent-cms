import Link from 'next/link'
import Head from 'next/head'
import { GetServerSideProps, InferGetServerSidePropsType } from 'next'

import { getSiteInformation } from '../../api/site'
import MenuHeader from '../../components/interface/menu/MenuHeader'

interface Page {
  name: string
  id: string
  path: string
}

export const getServerSideProps: GetServerSideProps = async () => {
  const result = await getSiteInformation()
  const pages: Page[] = result.data
  return {
    props: {
      pages,
    },
  }
}

const Studio: React.FC = ({ pages }: InferGetServerSidePropsType<typeof getServerSideProps>) => {
  const baseMainContentWrapper = `flex-1 min-h-screen transform duration-300 pt-12`
  return (
    <>
      <Head>
        <title>Pertinent CMS - Studio</title>
        <meta name="description" content="Generated by create next app" />
      </Head>

      <main className={baseMainContentWrapper}>
        <MenuHeader />
        <div className="container w-4/5 md:w-2/3 lg:w-1/2 mx-auto">
          <h2>Pages</h2>
          <p>Description of the page section</p>
          <div className="flex flex-col mt-6">
            {pages.map((page: Page) => {
              return (
                <Link key={page.id} href={`studio/page/${page.id}`}>
                  <a className="rounded-md bg-gray-100 px-2 py-1 shadow-sm">{page.name}</a>
                </Link>
              )
            })}
          </div>
        </div>
      </main>
    </>
  )
}

export default Studio
